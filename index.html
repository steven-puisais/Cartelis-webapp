<html>
	<head>
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
		<link href="style.css" rel="stylesheet" type="text/css">
		<script src="https://apis.google.com/js/api:client.js"></script>
		<script>
			var googleUser = {};
			var startApp = function () {
				gapi.load('auth2', function () {
					// Retrieve the singleton for the GoogleAuth library and set up the client.
					auth2 = gapi.auth2.init({
						client_id: '613313973525-ruv23jes3e7vii6brjdosld874t59vbm.apps.googleusercontent.com',
						cookiepolicy: 'single_host_origin',
						// Request scopes in addition to 'profile' and 'email'
						//scope: 'additional_scope'
					});
					attachSignin(document.getElementById('customBtn'));
				});
			};

			// check if you have access to the user's google drive, and requests permission if you don't have it
			// if (googleUser.hasGrantedScopes(SCOPE_STRING))
			//   accessDrive();
			// else
			// {
			//   googleUser.grant({
			//     scope: SCOPE_STRING
			//   }).then(function(googleUser){
			//     accessDrive();
			//   });
			// }

			function attachSignin(element) {
				auth2.attachClickHandler(element, {},
					function (googleUser) {
						document.getElementById('name').innerText = "Access granted !\n Currently signed in as " +
							googleUser.getBasicProfile().getName();
						document.getElementById("gSignInWrapper").style.display = "none";
						window.location.replace("logged-in.html");
					}, function (error) {
						alert(JSON.stringify(error, undefined, 2));
					});
			}

			function accessDrive() {

			}
		</script>
	</head>
	<body>
		<div id="gSignInWrapper">
			<div id="customBtn" class="customGPlusSignIn">
				<span class="icon"></span>
				<span class="buttonText">Connect API</span>
			</div>
		</div>
		<div id="name"></div>
		<script>startApp();</script>
	</body>
</html>